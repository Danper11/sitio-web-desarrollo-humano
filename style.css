/* ===== Editorial Pro – limpio y profesional ===== */
:root{ --r:10px; --s1:8px; --s2:12px; --s3:16px; --s4:24px; --s5:32px; --s6:48px; }
body[data-theme="light-pro"]{
  --bg:#fbfbfb; --ink:#0a1712; --muted:#5a6d63; --line:#e6ede9;
  --accent:#168a52; --accent-2:#20c075; --paper:#ffffff; --chip:#eff7f2;
}
body[data-theme="dark-contrast"]{
  --bg:#0c1110; --ink:#eff7f1; --muted:#a7bcb2; --line:#1c2a26;
  --accent:#2bf07f; --accent-2:#72f1b3; --paper:#121816; --chip:#0f1b17;
}
body[data-theme="verde-tapachula"]{
  --bg:#f0faf4; --ink:#0d1a14; --muted:#567165; --line:#d8ece2;
  --accent:#0ea548; --accent-2:#12c93a; --paper:#ffffff; --chip:#e6faf7;
}

/* Base */
*{ box-sizing:border-box; }
html{ scroll-behavior:smooth; }
body{ margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--ink); background:var(--bg); }
.container{ width:min(1120px, 92%); margin:0 auto; }
.section{ padding:var(--s6) 0; }
.section-alt{ background:color-mix(in srgb, var(--bg) 92%, var(--paper) 8%); }
h1,h2,h3{ line-height:1.15; margin:0 0 var(--s2); }
.display{ font-size:clamp(2.1rem, 4.5vw, 3rem); letter-spacing:-0.5px; }
.lead{ font-size:1.15rem; color:var(--muted); margin-bottom:var(--s3); }
.muted{ color:var(--muted); }
.row{ display:flex; align-items:center; }
.row.between{ justify-content:space-between; }
.wrap{ flex-wrap:wrap; }
.align-center{ align-items:center; }
.center{ text-align:center; }
.gap-8{ gap:8px; } .gap-12{ gap:12px; } .gap-16{ gap:16px; } .gap-24{ gap:24px; }

/* Grilla 12 col */
.grid-12{ display:grid; grid-template-columns:repeat(12,1fr); }
.col-3{ grid-column:span 3; } .col-4{ grid-column:span 4; } .col-5{ grid-column:span 5; }
.col-6{ grid-column:span 6; } .col-7{ grid-column:span 7; } .col-8{ grid-column:span 8; } .col-9{ grid-column:span 9; }
@media (max-width:980px){ .col-7,.col-8,.col-9{ grid-column:1/-1; } .col-3,.col-4,.col-5,.col-6{ grid-column:1/-1; } }

/* Header */
.site-header{
  position:sticky; top:0; z-index:50; background:rgba(255,255,255,.6);
  backdrop-filter:saturate(140%) blur(8px); border-bottom:1px solid var(--line);
}
body[data-theme="dark-contrast"] .site-header{ background:rgba(18,22,21,.6); }
.header-inner{ display:flex; align-items:center; justify-content:space-between; padding:12px 0; gap:12px; }
.brand{ display:flex; align-items:center; gap:10px; color:inherit; text-decoration:none; font-weight:800; }
.brand-mark{ display:inline-flex; width:28px; height:28px; align-items:center; justify-content:center; background:var(--chip); color:var(--accent); border-radius:8px; }

/* Nav + “Más” */
.main-nav{ display:flex; gap:12px; align-items:center; margin:0; padding:0; list-style:none; }
.main-nav a{ color:var(--muted); text-decoration:none; font-weight:700; padding:8px 10px; border-radius:8px; }
.main-nav a:hover{ color:var(--ink); background:color-mix(in srgb, var(--bg) 80%, var(--paper) 20%); }
.pill{ border:1px solid var(--line); }
.menu-more{ position:relative; }
.more-btn{
  border:1px solid var(--line); background:var(--paper); padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:800; color:var(--muted);
}
.more-menu{
  position:absolute; right:0; top:calc(100% + 8px); min-width:220px; display:none;
  background:var(--paper); border:1px solid var(--line); border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,.08); padding:6px; z-index:60;
}
.more-menu a{ display:block; padding:10px 12px; border-radius:8px; color:var(--ink); border:1px solid transparent; }
.more-menu a:hover{ background:color-mix(in srgb, var(--bg) 80%, var(--paper) 20%); border-color:var(--line); }
.menu-more.open .more-menu{ display:block; }
.theme-switch{ display:flex; gap:6px; }
.theme-btn{ border:1px solid var(--line); background:var(--paper); padding:6px 8px; border-radius:8px; cursor:pointer; font-weight:800; }
.theme-btn[aria-pressed="true"]{ outline:2px solid var(--accent); }

/* Hero editorial */
.hero .hero-figure{ border-radius:var(--r); overflow:hidden; border:1px solid var(--line); }
.hero img{ width:100%; height:auto; display:block; }
.hero figcaption{ font-size:.9rem; color:var(--muted); padding:8px 10px; background:var(--paper); border-top:1px solid var(--line); }

/* Prosa / Aside */
.prose p{ margin:0 0 var(--s2); }
.info-aside{ display:grid; gap:12px; }
/* Fix: separar líneas dentro de los stats del aside */
.info-aside .stat{
  line-height: 1.25;
}
.info-aside .stat .k{
  display:block;
  color: var(--muted);
  font-size: .9rem;
  margin-bottom: 4px;     /* pequeño respiro */
}
.info-aside .stat strong{
  display:block;          /* ← evita que se pegue con el small */
  font-weight: 800;
  font-size: 1.1rem;
  letter-spacing: .2px;
  margin-bottom: 4px;     /* espacio antes del small */
}
.info-aside .stat small{
  display:block;          /* ← a su propia línea */
  color: var(--muted);
  font-size: .9rem;
}

/* Listado editorial (media objects) */
.list-media{ display:grid; gap:16px; }
.media{ display:grid; grid-template-columns:96px 1fr; gap:16px; align-items:center; border-top:1px solid var(--line); padding-top:16px; }
.media:first-child{ border-top:none; padding-top:0; }
.media-img{ width:100%; height:96px; background:color-mix(in srgb, var(--bg) 70%, var(--paper) 30%); border:1px solid var(--line); border-radius:var(--r); }
.media-img.sm{ height:72px; }
.media-bullet{ width:56px; height:56px; display:flex; align-items:center; justify-content:center; background:var(--chip); border:1px solid var(--line); border-radius:50%; font-size:1.2rem; }

/* TOC pegajoso */
.toc{ position:sticky; top:88px; align-self:start; border:1px solid var(--line); border-radius:var(--r); padding:12px; background:var(--paper); }
.toc-title{ display:block; margin-bottom:8px; color:var(--muted); }
.toc a{ display:block; padding:8px; border-radius:8px; color:var(--ink); text-decoration:none; }
.toc a:hover{ background:color-mix(in srgb, var(--bg) 80%, var(--paper) 20%); }

/* Bloques de contenido */
.block{ margin-bottom:var(--s6); }
.block-h{ margin-bottom:var(--s3); }
.card-plain{ border:1px solid var(--line); border-radius:var(--r); padding:14px; background:var(--paper); }
.hint{ color:var(--accent); font-size:.95rem; margin-top:8px; }
.no{ color:#b02a2a; font-weight:700; }

/* Recursos */
.media-row{ display:grid; grid-template-columns:repeat(3,1fr); gap:16px; }
@media (max-width:980px){ .media-row{ grid-template-columns:1fr; } }

/* Galería */
.gallery{ display:grid; grid-template-columns:repeat(3, 1fr); gap:12px; }
@media (max-width:980px){ .gallery{ grid-template-columns:1fr 1fr; } }
@media (max-width:600px){ .gallery{ grid-template-columns:1fr; } }
.g-item{
  padding:0; margin:0; border:none; background:transparent; cursor:pointer; border-radius:var(--r); overflow:hidden;
  border:1px solid var(--line);
}
.g-item img{ display:block; width:100%; height:220px; object-fit:cover; }

/* Lightbox */
.lightbox{ border:none; padding:0; background:transparent; }
.lightbox::backdrop{ background:rgba(0,0,0,.55); }
.lb-close{
  position:absolute; top:16px; right:16px;
  border:1px solid var(--line); background:var(--paper); color:var(--ink);
  border-radius:8px; padding:6px 10px; cursor:pointer;
}
#lb-img{ max-width:92vw; max-height:86vh; display:block; border:1px solid var(--line); border-radius:var(--r); }

/* Compromiso */
.commit-kpi strong, #commit-count{ font-size:2.2rem; color:var(--accent); }

/* Botones */
.btn{ display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 14px; border-radius:8px; font-weight:800; cursor:pointer; text-decoration:none; border:1px solid var(--line); color:var(--ink); background:var(--paper); }
.btn.primary{ background:linear-gradient(90deg, var(--accent), var(--accent-2)); color:#072116; border:1px solid color-mix(in srgb, var(--accent) 70%, #000 30%); }
.btn.ghost{ background:transparent; }
.btn.outline{ background:transparent; }
.btn.small{ padding:8px 12px; font-size:.95rem; }
.btn.link{ border:none; padding:0; color:var(--accent); background:transparent; }
.badge-soft{ padding:4px 10px; border:1px solid var(--line); border-radius:999px; background:var(--chip); color:var(--accent); font-weight:800; }

/* Juego */
.game{ border:1px solid var(--line); border-radius:var(--r); padding:14px; background:var(--paper); }
.hud{ display:grid; grid-template-columns:1fr auto 1fr; gap:12px; align-items:center; margin-bottom:12px; }
.tag{ border:1px solid var(--line); border-radius:8px; padding:6px 8px; background:color-mix(in srgb, var(--bg) 85%, var(--paper) 15%); }
.flowbar{ display:inline-block; width:120px; height:8px; background:color-mix(in srgb, var(--bg) 70%, var(--paper) 30%); border:1px solid var(--line); border-radius:999px; margin-left:6px; }
.flowbar span{ display:block; height:100%; background:linear-gradient(90deg, var(--accent), var(--accent-2)); border-radius:999px; }
.timer{ width:72px; height:72px; }
.timer-svg{ width:100%; height:100%; display:block; }
.timer-svg .bg{ fill:none; stroke:var(--line); stroke-width:3; }
.timer-svg .fg{ fill:none; stroke:var(--accent); stroke-width:3; stroke-linecap:round; transform:rotate(-90deg); transform-origin:50% 50%; }
.timer-svg .time-text{ fill:var(--ink); font-size:9px; text-anchor:middle; dominant-baseline:middle; }
.lives{ display:flex; gap:6px; }
.life{ width:14px; height:14px; border-radius:50%; border:2px solid color-mix(in srgb, var(--accent) 65%, #000 35%); background:transparent; }
.life.full{ background:var(--accent); }
.missions{ display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 12px; }
.mission{ padding:6px 8px; border:1px dashed var(--line); border-radius:8px; background:color-mix(in srgb, var(--bg) 92%, var(--paper) 8%); font-weight:700; }
.playarea{ display:grid; gap:12px; }
.obj{ min-height:56px; display:flex; align-items:center; gap:10px; padding:10px 12px; border:1px dashed var(--accent); border-radius:8px; background:var(--paper); }
.bins{ display:grid; grid-template-columns:repeat(5,1fr); gap:10px; }
.bin{ border:1px solid var(--line); border-radius:8px; padding:10px; text-align:center; background:var(--paper); cursor:pointer; }
.bin:hover{ outline:2px solid color-mix(in srgb, var(--accent) 35%, transparent); }
.bin kbd{ background:color-mix(in srgb, var(--bg) 85%, var(--paper) 15%); border:1px solid var(--line); padding:0 6px; border-radius:6px; }
.fb{ min-height:24px; font-weight:700; color:var(--accent); }

/* Modal resultados */
.modal{ border:none; padding:0; background:transparent; }
.modal::backdrop{ background:rgba(0,0,0,.25); backdrop-filter:blur(2px); }
.modal-card{ width:min(720px, 96vw); background:var(--paper); border:1px solid var(--line); border-radius:var(--r); }
.modal-card header, .modal-card footer{ padding:12px 14px; border-bottom:1px solid var(--line); }
.modal-card footer{ border-bottom:none; display:flex; justify-content:flex-end; gap:10px; }
.res-body{ padding:14px; }
.res-grid{ display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-bottom:12px; }
.res-kpi{ border:1px solid var(--line); border-radius:8px; padding:10px; text-align:center; background:var(--paper); }
.res-kpi strong{ color:var(--accent); font-size:1.25rem; }
.res-table-wrap{ overflow:auto; border:1px solid var(--line); border-radius:8px; }
.res-table{ width:100%; border-collapse:collapse; }
.res-table th, .res-table td{ padding:10px; border-bottom:1px solid var(--line); text-align:center; }
.badges{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
.badge{ padding:6px 10px; border-radius:999px; border:1px solid var(--line); }
.badge.win{ border-color:var(--accent); background:color-mix(in srgb, var(--accent) 18%, white); }
.badge.pro{ border-color:#b48a10; background:color-mix(in srgb, #b48a10 18%, white); }

/* Accesibilidad + utilidades */
.skip-link{ position:absolute; left:-9999px; }
.skip-link:focus{ left:16px; top:12px; background:#000; color:#fff; padding:8px 12px; border-radius:8px; z-index:1000; }

/* Footer */
.site-footer{ border-top:1px solid var(--line); }
.site-footer .container{ padding:18px 0 48px; color:var(--muted); font-size:.95rem; text-align:center; }